(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56494f70"],{"6ae4":function(e,s,a){"use strict";var t=a("8773"),n=a.n(t);n.a},8773:function(e,s,a){},9586:function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"shop_manage"},[a("p",{staticClass:"leigod_mb25 user_title_font"},[e._v("商户管理")]),a("div",{staticClass:"leigod_dashedbottom"}),a("div",{staticClass:"leigod_pv50"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"status-icon":"",rules:e.ShopManageInfo,"label-width":"108px","label-position":"left"}},[a("el-form-item",{attrs:{label:"账号：",prop:""}},[a("span",{staticClass:"leigod_ml10"},[e._v(e._s(e.ShopManageInfo.username))])]),a("el-form-item",{attrs:{label:"公司名称：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.title,callback:function(s){e.$set(e.ShopManageInfo,"title",s)},expression:"ShopManageInfo.title"}})],1),a("el-form-item",{attrs:{label:"营业执照号：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.business_id,callback:function(s){e.$set(e.ShopManageInfo,"business_id",s)},expression:"ShopManageInfo.business_id"}})],1),a("el-form-item",{attrs:{label:"营业执照：",prop:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.licenseImgurl,"show-file-list":!1,data:e.usertoken,"on-success":e.licenseSuccess,"before-upload":e.beforeLicenseUpload}},[e.ShopManageInfo.business_license?a("div",[a("img",{staticClass:"avatar",attrs:{width:"168",src:e.ShopManageInfo.business_license}}),a("label",{staticStyle:{"vertical-align":"bottom",cursor:"pointer",color:"#35a7d3","margin-left":"10px",position:"relative",top:"18px"}},[e._v("修改")])]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"地址：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.address,callback:function(s){e.$set(e.ShopManageInfo,"address",s)},expression:"ShopManageInfo.address"}})],1),a("el-form-item",{attrs:{label:"系统名称：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.business_sysname,callback:function(s){e.$set(e.ShopManageInfo,"business_sysname",s)},expression:"ShopManageInfo.business_sysname"}})],1),a("el-form-item",{attrs:{label:"官网网址：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.business_homepage,callback:function(s){e.$set(e.ShopManageInfo,"business_homepage",s)},expression:"ShopManageInfo.business_homepage"}})],1),a("el-form-item",{attrs:{label:"规模：",prop:""}},[a("span",{staticClass:"leigod_ml10"},[e._v(e._s(e.ShopManageInfo.number))])]),a("el-form-item",{attrs:{label:"负责人：",prop:""}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},on:{change:e.wangbaInfoReset},model:{value:e.ShopManageInfo.business_manager,callback:function(s){e.$set(e.ShopManageInfo,"business_manager",s)},expression:"ShopManageInfo.business_manager"}})],1)],1)],1),a("div",{staticClass:"leigod_dashedbottom"}),a("div",{staticClass:"leigod_mt45 leigod_text_center"},[a("button",{staticClass:"user_common_btn",on:{click:e.saveShopInfo}},[e._v("保存")])])])},n=[],o=a("9ab4"),i=a("60a3"),r=a("a2c3"),l=a("3825"),p=a("9347"),c=a("a888"),u=a("fe3e"),f=a("1984"),h=a("dd13"),g=a("649b"),m=function(e){function s(){var s=null!==e&&e.apply(this,arguments)||this;return s.test="",s.ShopManageInfo=s.userinfo,s.licenseImgurl="",s.usertoken={token:""},s.is_reset_wangbainfo=!1,s.xmlParse=new g["a"],s}return o["c"](s,e),s.prototype.created=function(){this.setBaseUrl(h["a"].getBaseUrl()),this.licenseImgurl=h["a"].getBaseUrl()+c["a"].DO_SAVE_BUSINESSLICENCE,this.onGetToken()},s.prototype.init=function(){},s.prototype.onGetToken=function(){var e=p["a"].getUrlParam(l["a"].STORAGES_TOKEN)||l["a"].getCookie(l["a"].STORAGES_TOKEN);this.usertoken.token=e},s.prototype.licenseSuccess=function(e,s){e=this.xmlParse.parseXML(e);var a=e.xml.items;if(a.result==c["a"].HTTP_TOKEN_EXPIRE)this.$message.error("填写超时,请联系客服处理");else if(a.code!=c["a"].HTTP_SUCCESS_NET_CODE)return this.$message.error("图片有损坏,请更换图片"),!1;this.ShopManageInfo.business_license=a.url+"?n="+new Date,this.wangbaInfoReset()},s.prototype.beforeLicenseUpload=function(e){this.onGetToken();var s=e.size/1024<2048;return s||this.$message.error("上传头像图片大小不能超过 2M!"),s},s.prototype.wangbaInfoReset=function(){this.is_reset_wangbainfo=!0},s.prototype.checkShopInfo=function(){return!!this.is_reset_wangbainfo&&(!!(this.ShopManageInfo.title&&this.ShopManageInfo.address&&this.ShopManageInfo.business_id&&this.ShopManageInfo.business_license&&this.ShopManageInfo.business_manager)||(this.$message.error("请完善信息"),!1))},s.prototype.saveShopInfo=function(){return o["a"](this,void 0,void 0,function(){var e,s,a,t;return o["d"](this,function(n){switch(n.label){case 0:return this.checkShopInfo()?(e=p["a"].getUrlParam(l["a"].STORAGES_TOKEN),""==e&&(e=l["a"].getCookie(l["a"].STORAGES_TOKEN)),s=c["a"].DO_MODI,a=new r["k"],a.address=this.ShopManageInfo.address,a.title=this.ShopManageInfo.title,a.business_id=this.ShopManageInfo.business_id,a.business_sysname=this.ShopManageInfo.business_sysname,a.business_homepage=this.ShopManageInfo.business_homepage,a.business_manager=this.ShopManageInfo.business_manager,a.business_license=this.ShopManageInfo.business_license,a.token=e,t=this,[4,this.xmlHttp.post(s,a)]):[2];case 1:return t.backData=n.sent(),this.backData.code==c["a"].HTTP_SUCCESS_NET_CODE?(this.$message.success("信息修改成功!"),this.is_reset_wangbainfo=!1):this.backData.code==c["a"].HTTP_TOKEN_EXPIRE&&this.tokenexpire(),[2]}})})},s.prototype.tokenexpire=function(){this.$message({showClose:!0,duration:2e3,message:"登录失效,请重新登录",type:"error",onClose:function(){u["a"].loginOut(),window.location.href="/login.html"}})},o["b"]([Object(i["b"])()],s.prototype,"userinfo",void 0),s=o["b"]([Object(i["a"])({})],s),s}(f["a"]),b=m,_=b,d=(a("6ae4"),a("2877")),S=Object(d["a"])(_,t,n,!1,null,"2d74079e",null);s["default"]=S.exports}}]);